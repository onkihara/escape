{"version":3,"file":"4-5731352a.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/houses/dsb-vault/_page.server.js","../../../.svelte-kit/adapter-node/nodes/4.js"],"sourcesContent":["import { r as redirect } from \"../../../../chunks/index.js\";\nimport { d as db } from \"../../../../chunks/mysql.js\";\nasync function canPlay(hash2, access_key) {\n  if (access_key) {\n    const data = await db.getPlayer(access_key);\n    if (data.player.is_root) {\n      return data;\n    }\n    for (let house in data.houses) {\n      if (house.hash === hash2) {\n        return data;\n      }\n    }\n    return data;\n  }\n  return false;\n}\nlet hash, player;\nasync function load({ cookies, url }) {\n  hash = url.pathname.split(\"/\").pop();\n  player = await canPlay(hash, cookies.get(\"access_key\"));\n  if (player) {\n    const house = await db.getHouseByHash(hash);\n    player.house = Object.assign({}, house[0]);\n    return player;\n  }\n  throw redirect(303, \"/\");\n}\nconst actions = {\n  default: async ({ request }) => {\n    const inputs = {\n      room_0: \"Schloss1998\",\n      room_1: \"42\",\n      room_2: \"RRNP\",\n      room_3: \"Energie!\",\n      room_4: \"h3ur3k4\"\n    };\n    const data = await request.formData();\n    const formdata = {};\n    for (const key of data.keys()) {\n      formdata[key] = data.get(key);\n    }\n    if (formdata.solution === inputs[\"room_\" + formdata.room]) {\n      const new_rank = await db.setRank(player.house.id, player.player.key, ++player.player.rank);\n      console.log(new_rank);\n    }\n    return { success: true, ...formdata };\n  }\n};\nexport {\n  actions,\n  load\n};\n","import * as server from '../entries/pages/houses/dsb-vault/_page.server.js';\n\nexport const index = 4;\nexport const component = async () => (await import('../entries/pages/houses/dsb-vault/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/houses/dsb-vault/+page.server.js\";\nexport const imports = [\"_app/immutable/entry/houses-dsb-vault-page.svelte.4020e7af.js\",\"_app/immutable/chunks/index.5e7f823c.js\"];\nexport const stylesheets = [\"_app/immutable/assets/_page.4e698b7f.css\"];\nexport const fonts = [];\n"],"names":[],"mappings":"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"}